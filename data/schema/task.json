{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://intersystems.com/schemas/task",
    "title": "Task",
    "description": "A data processing job",
    "type": "object",
    "properties": {
        "taskid": {
            "description": "The unique identifier for a task",
            "type": "string"
        },
        "pipelineids": {
            "description": "IDs of all pipelines that contain this task",
            "type": "array", 
            "items": {
                "type": "string"
            }
        },
        "type": {
            "description": "The type of task (e.g. 'table, recipe, AWS RDS ingest, aggregate, join, etc.')",
            "type": "string"
        },
        "source": {
            "description": "The source data for the task",
            "type": "object",
            "properties": {
                "type": {
                    "description": "The type of data source (internal means IRIS)",
                    "type": "string"
                },
                "tasks": {
                    "description": "The tasks that this task depends upon, identified by their unique identifier",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": ["type"]
        },
        "compute": {
            "description": "Description of the computation this task will do",
            "type": "object",
            "properties": {
                "template": {
                    "description": "Signals this computation uses a structured format which is good for UIs",
                    "type": "object"
                }
            }
        },
        "sink": {
            "description": "The output data set for the task",
            "type": "object",
            "properties": {
                "type": {
                    "description": "The type of data sink (internal means IRIS)",
                    "type": "string"
                },
                "name": {
                    "description": "The (view or table) name of the data sink. In the case of a recipe, the task ID that represents the recipe's final output",
                    "type": "string"
                },
                "properties": {
                    "description": "Field names of the data sink",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "namespace": {
                    "description": "The namespace of the data sink",
                    "type": "string"
                }
            },
            "required": ["type", "name"]
        },
        "metadata": {
            "description": "Useful information for a catalog",
            "type": "object",
            "properties": {
                "name": {
                    "description": "Name of the task",
                    "type": "string"
                },
                "description": {
                    "description": "Description of the task",
                    "type": "string"
                },
                "autodescription": {
                    "description": "Description of the task as generated by code",
                    "type": "string"
                }, 
                "creator": {
                    "description": "User who created the task",
                    "type": "string"
                },
                "created": {
                    "description": "Date and time the task was created",
                    "type": "string"
                },
                "modified": {
                    "description": "Date and time the task was last updated",
                    "type": "string"
                }, 
                "lastrun": {
                    "description": "Date and time the task was last run",
                    "type": "string"
                },
                "publish": {
                    "description": "Whether this task should appear in the catalog",
                    "type": "boolean"
                },
                "required": ["name", "creator", "created"]
            }
        }
    },
    "required": ["taskid", "type", "source", "sink", "metadata"]
}